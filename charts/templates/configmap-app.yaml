apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "validation-gcp.configMapName" . }}
  labels:
    {{- include "validation-gcp.labels" . | nindent 4 }}
    app.kubernetes.io/component: adapter
data:
  # Adapter configuration file
  # Dynamically loaded based on deploymentMode
  # Edit charts/configs/validation-dummy-adapter.yaml or validation-gcp-adapter.yaml to customize
  adapter.yaml: |
{{ .Files.Get (printf "configs/%s" (include "validation-gcp.adapterConfigFile" .)) | nindent 4 }}
  {{- if eq .Values.deploymentMode "dummy" }}
  # Adapter task template referenced by the adapter config
  validation-dummy-job-adapter-task.yaml: |
{{ .Files.Get "configs/validation-dummy-job-adapter-task.yaml" | nindent 4 }}
  {{- end }}
